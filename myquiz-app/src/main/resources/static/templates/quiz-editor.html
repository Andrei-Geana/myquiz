<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="ISO-8859-1">
    <title>Quiz Editor</title>
    <link rel="stylesheet" type="text/css" th:href="@{/css/styles.css}">
</head>
<body>

<div th:insert="~{fragments::menu}"></div>
<div style="clear:both; margin-bottom:20px;"></div>

<h4 th:text="${quiz.id != null ? 'Edit Quiz: ' + quiz.name : 'Create New Quiz'}">Quiz Editor</h4>

<form th:action="@{/quiz/save}" th:object="${quiz}" method="post">
    <input type="hidden" th:field="*{id}" />

    <div style="margin: 20px 0;">
        <label for="name">Quiz Name:</label><br>
        <input type="text" id="name" th:field="*{name}" required style="width: 300px; padding: 8px;" />
    </div>

    <div style="margin: 20px 0;">
        <label for="course">Course:</label><br>
        <input type="text" id="course" th:field="*{course}" required style="width: 300px; padding: 8px;" />
    </div>

    <div style="margin: 20px 0;">
        <label for="year">Year:</label><br>
        <input type="number" id="year" th:field="*{year}" min="2020" max="2030" style="width: 150px; padding: 8px;" />
    </div>

    <div style="margin: 20px 0;">
        <label for="sourceFile">Source File:</label><br>
        <input type="text" id="sourceFile" th:field="*{sourceFile}" style="width: 400px; padding: 8px;" />
    </div>

    <div class="action-buttons" style="margin: 30px 0;">
        <button type="submit" class="btn btn-add">Save Quiz</button>
        <a th:href="@{/quiz/}" class="btn btn-edit">Cancel</a>
    </div>
</form>

<div th:if="${quiz.id != null}" style="margin-top: 40px;">
    <h5>Quiz Statistics</h5>
    <p><strong>Multiple Choice Questions:</strong> <span th:text="${quiz.questionsMC != null ? quiz.questionsMC.size() : 0}">0</span></p>
    <p><strong>True/False Questions:</strong> <span th:text="${quiz.questionsTF != null ? quiz.questionsTF.size() : 0}">0</span></p>
    <p><strong>Total Questions:</strong> <span th:text="${(quiz.questionsMC != null ? quiz.questionsMC.size() : 0) + (quiz.questionsTF != null ? quiz.questionsTF.size() : 0)}">0</span></p>
    <p><strong>Number of Authors:</strong> <span th:text="${quiz.noAuthors}">0</span></p>

    <div class="action-buttons" style="margin: 20px 0;">
        <a th:href="@{'/question-list/' + ${quiz.course}}" class="btn btn-edit">Manage Questions</a>
        <a th:href="@{'/authors/?selectedCourse=' + ${quiz.course}}" class="btn btn-edit">View Authors</a>
    </div>
</div>

</body>
</html>
